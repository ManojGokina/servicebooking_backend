{"level":"error","message":"Unexpected Error: schema.validate is not a function","stack":"TypeError: schema.validate is not a function\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:6:28\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-04-14T22:11:32.313Z"}
{"code":11000,"errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: Booking.users index: email_1 dup key: { email: \"manojgokina@gmail.com\" }","index":0,"keyPattern":{"email":1},"keyValue":{"email":"manojgokina@gmail.com"}},"index":0,"keyPattern":{"email":1},"keyValue":{"email":"manojgokina@gmail.com"},"level":"error","message":"Unexpected Error: E11000 duplicate key error collection: Booking.users index: email_1 dup key: { email: \"manojgokina@gmail.com\" }","stack":"MongoServerError: E11000 duplicate key error collection: Booking.users index: email_1 dup key: { email: \"manojgokina@gmail.com\" }\n    at InsertOneOperation.execute (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/operations/insert.ts:88:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at tryOperation (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/operations/execute_operation.ts:283:14)\n    at executeOperation (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/operations/execute_operation.ts:115:12)\n    at Collection.insertOne (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/collection.ts:285:12)","timestamp":"2025-04-14T22:15:07.678Z"}
{"level":"error","message":"API Error: Required","stack":"Error: Required\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:12:19\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","statusCode":400,"timestamp":"2025-04-14T22:24:20.423Z"}
{"level":"error","message":"API Error: Required","stack":"Error: Required\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:12:19\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","statusCode":400,"timestamp":"2025-04-14T22:24:29.992Z"}
{"level":"error","message":"API Error: Required, Required","stack":"Error: Required, Required\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:12:19\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","statusCode":400,"timestamp":"2025-04-14T22:27:14.218Z"}
{"level":"error","message":"API Error: Required, Required","stack":"Error: Required, Required\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:12:19\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","statusCode":400,"timestamp":"2025-04-14T22:27:15.782Z"}
{"level":"error","message":"API Error: Required, Required","stack":"Error: Required, Required\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:12:19\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","statusCode":400,"timestamp":"2025-04-14T22:27:16.689Z"}
{"level":"error","message":"API Error: Required, Required","stack":"Error: Required, Required\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:12:19\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","statusCode":400,"timestamp":"2025-04-14T22:29:50.648Z"}
{"level":"error","message":"API Error: Required, Required","stack":"Error: Required, Required\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:12:19\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","statusCode":400,"timestamp":"2025-04-14T22:29:51.465Z"}
{"level":"error","message":"API Error: Required, Required","stack":"Error: Required, Required\n    at /Users/manojgokina/Documents/bookingapp_backend/src/middleware/validation.middleware.ts:12:19\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","statusCode":400,"timestamp":"2025-04-14T22:29:51.755Z"}
{"level":"error","message":"Unexpected Error: categories is not iterable","stack":"TypeError: categories is not iterable\n    at postServiceCategories (/Users/manojgokina/Documents/bookingapp_backend/src/controllers/services.controller.ts:16:32)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/manojgokina/Documents/bookingapp_backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-04-14T23:04:55.119Z"}
{"code":11000,"errorLabelSet":{},"errorResponse":{"code":11000,"message":"E11000 duplicate key error collection: Booking.subcategories index: name_1 dup key: { name: \"Haircut\" }","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: Booking.subcategories index: name_1 dup key: { name: \"Haircut\" }","index":0,"op":{"__v":0,"_id":"67fd973eb7bb50f04df2ca67","categoryId":"67fd973eb7bb50f04df2ca65","createdAt":"2025-04-14T23:16:14.744Z","image":"https://images.unsplash.com/photo-1508710727137-c01db6155045?w=100&h=100&fit=crop","name":"Haircut","updatedAt":"2025-04-14T23:16:14.744Z"}},"index":0}]},"insertedDocs":[],"level":"error","message":"Unexpected Error: E11000 duplicate key error collection: Booking.subcategories index: name_1 dup key: { name: \"Haircut\" }","result":{"deletedCount":0,"insertedCount":0,"insertedIds":{},"matchedCount":0,"modifiedCount":0,"upsertedCount":0,"upsertedIds":{}},"stack":"MongoBulkWriteError: E11000 duplicate key error collection: Booking.subcategories index: name_1 dup key: { name: \"Haircut\" }\n    at OrderedBulkOperation.handleWriteError (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/bulk/common.ts:1224:13)\n    at executeCommands (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/bulk/common.ts:587:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at BulkWriteShimOperation.execute (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/bulk/common.ts:882:12)\n    at tryOperation (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/operations/execute_operation.ts:283:14)\n    at executeOperation (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/operations/execute_operation.ts:115:12)\n    at OrderedBulkOperation.execute (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/bulk/common.ts:1211:12)\n    at BulkWriteOperation.execute (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/operations/bulk_write.ts:60:12)\n    at InsertManyOperation.execute (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/operations/insert.ts:147:19)\n    at tryOperation (/Users/manojgokina/Documents/bookingapp_backend/node_modules/mongodb/src/operations/execute_operation.ts:283:14)","timestamp":"2025-04-14T23:16:14.765Z","writeErrors":[{"err":{"code":11000,"errmsg":"E11000 duplicate key error collection: Booking.subcategories index: name_1 dup key: { name: \"Haircut\" }","index":0,"op":{"__v":0,"_id":"67fd973eb7bb50f04df2ca67","categoryId":"67fd973eb7bb50f04df2ca65","createdAt":"2025-04-14T23:16:14.744Z","image":"https://images.unsplash.com/photo-1508710727137-c01db6155045?w=100&h=100&fit=crop","name":"Haircut","updatedAt":"2025-04-14T23:16:14.744Z"}},"index":0}]}
